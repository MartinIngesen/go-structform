data.types: [
    bool,
    string,
    uint, uint8, uint16, uint32, uint64,
    int, int8, int16, int32, int64,
    float32, float64
  ]

main: |
  package gotype
  
  func (u *unfoldCtx) trySetGotypeTarget(to interface{}) bool {
    switch ptr := to.(type) {

    // primitives
    {{ range .types }}
    case *{{ . }}:
      u.ptr.push(unsafe.Pointer(ptr))
      u.unfolder.push(newUnfolder{{ . | capitalize }}())
    {{ end }}

    // arrays
    {{ range .types }}
    case *[]{{ . }}:
      u.ptr.push(unsafe.Pointer(ptr))
      u.detail.push(unfoldWaitStart)
      u.unfolder.push(newUnfolderArr{{ . | capitalize }}())
    {{ end }}

    // maps
    {{ range .types }}
    case *map[string]{{ . }}:
      u.ptr.push(unsafe.Pointer(ptr))
      u.detail.push(unfoldWaitStart)
      u.unfolder.push(newUnfolderMap{{ . | capitalize }}())
    {{ end }}

    default:
      return false
    }
    return true
  }
